# ä»£ç¢¼åˆ†å‰²å„ªåŒ–å¾…è¾¦äº‹é …

**å‰µå»ºæ—¥æœŸ**: 2026-01-26
**ç›®æ¨™å®Œæˆæ—¥æœŸ**: 2026-02-02ï¼ˆä¸€é€±å…§ï¼‰

---

## ğŸ¯ å„ªåŒ–ç›®æ¨™æé†’

- âœ… æ¸›å°‘åˆå§‹ bundle size 20-30%
- âœ… æ¸›å°‘é¦–æ¬¡åŠ è¼‰æ™‚é–“ 15-20%
- âœ… Lighthouse Performance Score > 90

---

## ğŸ“‹ å¾…è¾¦æ¸…å–®

### Phase 1: åŸºæº–æ¸¬è©¦èˆ‡æº–å‚™ â° ä»Šå¤©

#### æ§‹å»ºèˆ‡åˆ†æ
- [ ] **1.1** è§£æ±ºæ‰€æœ‰ TypeScript æ§‹å»ºéŒ¯èª¤
  - [ ] ä¿®å¾© `OnlyOfficeEditor.tsx` ä¸­çš„ `metadata` éŒ¯èª¤
  - [ ] ä¿®å¾© `OnlyOfficeEditorWithUpload.tsx` ä¸­çš„ `metadata` éŒ¯èª¤
  - [ ] ä¿®å¾© `TemplateList.tsx` ä¸­çš„ `metadata` éŒ¯èª¤
  - [ ] ä¿®å¾© `TemplateDesigner.tsx` ä¸­çš„ `metadata` éŒ¯èª¤
  - **å‚™è¨»**: è€ƒæ…®æš«æ™‚ç§»é™¤ `metadata` å±¬æ€§æˆ–èª¿æ•´ error handler é¡å‹å®šç¾©

- [ ] **1.2** æˆåŠŸé‹è¡Œ `npm run build`
  - è¨˜éŒ„æ§‹å»ºæ™‚é–“: `_____` ç§’
  - è¨˜éŒ„ç¸½ bundle size: `_____` KB

- [ ] **1.3** é‹è¡Œ `npm run analyze`
  - ç”Ÿæˆä¸¦ä¿å­˜ bundle åˆ†æå ±å‘Š
  - è­˜åˆ¥å‰ 10 å€‹æœ€å¤§çš„åŒ…
  - æˆªåœ–ä¿å­˜è‡³ `/docs/performance/before-optimization/`

#### æ€§èƒ½æ¸¬è©¦
- [ ] **1.4** Lighthouse åŸºæº–æ¸¬è©¦ï¼ˆæ¡Œé¢ç‰ˆï¼‰
  - æ¸¬è©¦é¦–é : Performance `___`, FCP `___s`, LCP `___s`
  - æ¸¬è©¦ Dashboard: Performance `___`, FCP `___s`, LCP `___s`
  - æ¸¬è©¦ Writing é é¢: Performance `___`, FCP `___s`, LCP `___s`
  - æˆªåœ–ä¿å­˜è‡³ `/docs/performance/before-optimization/`

- [ ] **1.5** è¨˜éŒ„åŸºæº–æ•¸æ“š
  - å¡«å¯« `PERFORMANCE_BASELINE.md`
  - å‰µå»ºæ€§èƒ½è¿½è¹¤è¡¨æ ¼

---

### Phase 2: å¤§å‹çµ„ä»¶æ‡¶åŠ è¼‰ â° Day 2-3

#### ProposalStructureEditor (2206è¡Œ) - æœ€é«˜å„ªå…ˆç´š
- [ ] **2.1** å‰µå»ºæ‡¶åŠ è¼‰åŒ…è£å™¨
  ```typescript
  // src/components/workspace/ProposalStructureEditorWrapper.tsx
  const ProposalStructureEditor = dynamic(...)
  ```

- [ ] **2.2** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®
  - [ ] æœç´¢: `import.*ProposalStructureEditor`
  - [ ] æ›¿æ›ç‚ºæ‡¶åŠ è¼‰ç‰ˆæœ¬

- [ ] **2.3** æ¸¬è©¦åŠŸèƒ½æ­£å¸¸
  - [ ] çµ„ä»¶æ­£å¸¸åŠ è¼‰
  - [ ] Loading ç‹€æ…‹é¡¯ç¤ºæ­£å¸¸
  - [ ] ç„¡ console éŒ¯èª¤

#### SourceManager (829è¡Œ)
- [ ] **2.4** å‰µå»ºæ‡¶åŠ è¼‰åŒ…è£å™¨
  ```typescript
  // src/components/workspace/SourceManagerWrapper.tsx
  const SourceManager = dynamic(...)
  ```

- [ ] **2.5** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **2.6** æ¸¬è©¦åŠŸèƒ½æ­£å¸¸

#### SectionList (672è¡Œ)
- [ ] **2.7** å‰µå»ºæ‡¶åŠ è¼‰åŒ…è£å™¨
  ```typescript
  // src/components/editor/SectionListWrapper.tsx
  const SectionList = dynamic(...)
  ```

- [ ] **2.8** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **2.9** æ¸¬è©¦åŠŸèƒ½æ­£å¸¸

#### TableOfContentsGenerator (670è¡Œ)
- [ ] **2.10** å‰µå»ºæ‡¶åŠ è¼‰åŒ…è£å™¨

- [ ] **2.11** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **2.12** æ¸¬è©¦åŠŸèƒ½æ­£å¸¸

#### ä¸­æœŸé©—è­‰
- [ ] **2.13** é‹è¡Œ `npm run build`
  - å°æ¯” Phase 1 çš„ bundle size
  - é æœŸæ¸›å°‘: ~10-15%

- [ ] **2.14** Lighthouse æ¸¬è©¦
  - å°æ¯”æ€§èƒ½æå‡

---

### Phase 3: Dialog çµ„ä»¶æ‡¶åŠ è¼‰ â° Day 4

#### AddSourceDialog (512è¡Œ)
- [ ] **3.1** ä¿®æ”¹ç‚ºæ¢ä»¶æ¸²æŸ“ + æ‡¶åŠ è¼‰
  ```typescript
  const AddSourceDialog = dynamic(() => import('./AddSourceDialog'))

  // ä½¿ç”¨æ–¹å¼
  {isOpen && <AddSourceDialog onClose={...} />}
  ```

- [ ] **3.2** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **3.3** æ¸¬è©¦ Dialog æ‰“é–‹/é—œé–‰

#### CreateProjectDialog
- [ ] **3.4** æ‡¶åŠ è¼‰å¯¦æ–½

- [ ] **3.5** æ›´æ–°å¼•ç”¨ä½ç½®

- [ ] **3.6** æ¸¬è©¦åŠŸèƒ½

#### UploadResourcesDialog
- [ ] **3.7** æ‡¶åŠ è¼‰å¯¦æ–½

- [ ] **3.8** æ›´æ–°å¼•ç”¨ä½ç½®

- [ ] **3.9** æ¸¬è©¦åŠŸèƒ½

#### SelectTemplateDialog
- [ ] **3.10** æ‡¶åŠ è¼‰å¯¦æ–½

- [ ] **3.11** æ›´æ–°å¼•ç”¨ä½ç½®

- [ ] **3.12** æ¸¬è©¦åŠŸèƒ½

#### å…¶ä»– Dialog çµ„ä»¶
- [ ] **3.13** æƒææ‰€æœ‰ Dialog çµ„ä»¶
  - æœç´¢: `Dialog` åœ¨ components ç›®éŒ„
  - åˆ—å‡ºæ‰€æœ‰éœ€è¦å„ªåŒ–çš„ Dialog

- [ ] **3.14** æ‰¹é‡å¯¦æ–½æ‡¶åŠ è¼‰

#### é©—è­‰
- [ ] **3.15** é‹è¡Œ `npm run build`
  - é æœŸé¡å¤–æ¸›å°‘: ~5-10%

---

### Phase 4: ç·¨è¼¯å™¨çµ„ä»¶æ‡¶åŠ è¼‰ â° Day 5

#### TiptapEditor
- [ ] **4.1** å‰µå»ºæ‡¶åŠ è¼‰ç‰ˆæœ¬
  ```typescript
  const TiptapEditor = dynamic(
    () => import('@/components/editor/TiptapEditor'),
    {
      loading: () => <div className="h-64">è¼‰å…¥ç·¨è¼¯å™¨...</div>,
      ssr: false
    }
  )
  ```

- [ ] **4.2** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **4.3** æ¸¬è©¦ç·¨è¼¯å™¨åŠŸèƒ½

#### OnlyOfficeEditor (461è¡Œ)
- [ ] **4.4** å‰µå»ºæ‡¶åŠ è¼‰ç‰ˆæœ¬
  - **æ³¨æ„**: å·²ä¾è³´ç€è¦½å™¨ APIï¼Œç¢ºä¿ `ssr: false`

- [ ] **4.5** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **4.6** æ¸¬è©¦ç·¨è¼¯å™¨åŠŸèƒ½

#### DraftEditor
- [ ] **4.7** å‰µå»ºæ‡¶åŠ è¼‰ç‰ˆæœ¬

- [ ] **4.8** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **4.9** æ¸¬è©¦ç·¨è¼¯å™¨åŠŸèƒ½

#### é©—è­‰
- [ ] **4.10** é‹è¡Œ `npm run build`
  - é æœŸé¡å¤–æ¸›å°‘: ~10-15%

---

### Phase 5: ç¬¬ä¸‰æ–¹åº«å„ªåŒ– â° Day 6

#### React Markdown
- [ ] **5.1** æ¢ä»¶åŠ è¼‰å¯¦æ–½
  ```typescript
  const ReactMarkdown = dynamic(() => import('react-markdown'))
  ```

- [ ] **5.2** æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®

- [ ] **5.3** æ¸¬è©¦æ¸²æŸ“åŠŸèƒ½

#### Docx Preview
- [ ] **5.4** æ‡¶åŠ è¼‰å¯¦æ–½

- [ ] **5.5** æ›´æ–°å¼•ç”¨ä½ç½®

- [ ] **5.6** æ¸¬è©¦é è¦½åŠŸèƒ½

#### å…¶ä»–å¤§å‹ç¬¬ä¸‰æ–¹åº«
- [ ] **5.7** æƒæ `node_modules` å¤§å°
  - ä½¿ç”¨ `npm list --depth=0 --parseable | xargs du -sh`
  - è­˜åˆ¥ > 50KB çš„åº«

- [ ] **5.8** è©•ä¼°æ˜¯å¦å¯ä»¥æ‡¶åŠ è¼‰

- [ ] **5.9** å¯¦æ–½æ‡¶åŠ è¼‰

#### é©—è­‰
- [ ] **5.10** é‹è¡Œ `npm run build`
  - é æœŸé¡å¤–æ¸›å°‘: ~3-5%

---

### Phase 6: æœ€çµ‚é©—è­‰èˆ‡æ¸¬è©¦ â° Day 7

#### Bundle åˆ†æ
- [ ] **6.1** é‹è¡Œ `npm run analyze`
  - ç”Ÿæˆæœ€çµ‚ bundle åˆ†æå ±å‘Š
  - æˆªåœ–ä¿å­˜è‡³ `/docs/performance/after-optimization/`

- [ ] **6.2** å°æ¯”å„ªåŒ–å‰å¾Œ
  - è¨ˆç®— bundle size æ¸›å°‘ç™¾åˆ†æ¯”
  - è­˜åˆ¥é‚„å¯ä»¥å„ªåŒ–çš„åœ°æ–¹

#### æ€§èƒ½æ¸¬è©¦
- [ ] **6.3** Lighthouse æ¸¬è©¦ï¼ˆæ¡Œé¢ç‰ˆï¼‰
  - æ¸¬è©¦é¦–é 
  - æ¸¬è©¦ Dashboard
  - æ¸¬è©¦ Writing é é¢
  - æˆªåœ–ä¿å­˜è‡³ `/docs/performance/after-optimization/`

- [ ] **6.4** Lighthouse æ¸¬è©¦ï¼ˆç§»å‹•ç‰ˆï¼‰
  - æ¸¬è©¦é¦–é 
  - æ¸¬è©¦ Dashboard

#### åŠŸèƒ½æ¸¬è©¦
- [ ] **6.5** å®Œæ•´åŠŸèƒ½æ¸¬è©¦
  - [ ] ç”¨æˆ¶è¨»å†Š/ç™»å…¥
  - [ ] å‰µå»ºé …ç›®
  - [ ] æ·»åŠ è³‡æº
  - [ ] æ–‡æª”æ’°å¯«
  - [ ] æ¨¡æ¿è¨­è¨ˆ
  - [ ] æ‰€æœ‰ Dialog æ‰“é–‹/é—œé–‰

- [ ] **6.6** ç„¡éšœç¤™æ¸¬è©¦
  - [ ] Keyboard navigation
  - [ ] Screen reader æ¸¬è©¦
  - [ ] ARIA å±¬æ€§æª¢æŸ¥

#### æ–‡æª”æ›´æ–°
- [ ] **6.7** æ’°å¯«æœ€çµ‚å„ªåŒ–å ±å‘Š
  - å¡«å¯« `PERFORMANCE_FINAL_REPORT.md`
  - åŒ…å«æ‰€æœ‰æ¸¬è©¦æ•¸æ“š
  - åŒ…å«å„ªåŒ–å‰å¾Œå°æ¯”åœ–è¡¨

- [ ] **6.8** æ›´æ–° README.md
  - æ·»åŠ æ€§èƒ½æŒ‡æ¨™
  - æ·»åŠ æœ€ä½³å¯¦è¸èªªæ˜

- [ ] **6.9** æ›´æ–°é–‹ç™¼æ–‡æª”
  - æ·»åŠ ä»£ç¢¼åˆ†å‰²æŒ‡å—
  - æ·»åŠ  troubleshooting èªªæ˜

---

## ğŸš§ é˜»å¡å•é¡Œè¿½è¹¤

### ç•¶å‰é˜»å¡
| ID | å•é¡Œ | ç‹€æ…‹ | è² è²¬äºº | æˆªæ­¢æ—¥æœŸ |
|----|------|------|--------|---------|
| B1 | TypeScript æ§‹å»ºéŒ¯èª¤ | â³ é€²è¡Œä¸­ | Ava | ä»Šå¤© |
| B2 | `metadata` å±¬æ€§é¡å‹éŒ¯èª¤ | â³ å¾…ä¿®å¾© | Ava | ä»Šå¤© |

### å·²è§£æ±º
| ID | å•é¡Œ | è§£æ±ºæ–¹æ¡ˆ | å®Œæˆæ—¥æœŸ |
|----|------|---------|---------|
| âœ… S1 | Header/Footer é¡å‹ä¸ä¸€è‡´ | çµ±ä¸€ä½¿ç”¨ `HeaderFooterContent` | 2026-01-26 |
| âœ… S2 | `VariableRenderer` ä¸æ”¯æŒå¯é¸ text | æ·»åŠ ç©ºå€¼æª¢æŸ¥ | 2026-01-26 |
| âœ… S3 | `AlignmentType` æšèˆ‰é¡å‹éŒ¯èª¤ | ä½¿ç”¨ `typeof AlignmentType[keyof typeof AlignmentType]` | 2026-01-26 |

---

## ğŸ“Š æ€§èƒ½è¿½è¹¤è¡¨

### Bundle Size è¿½è¹¤
| éšæ®µ | æ—¥æœŸ | Bundle Size (KB) | æ¸›å°‘ % | å‚™è¨» |
|------|------|-----------------|--------|------|
| Baseline | _____ | _____ | - | åˆå§‹ç‹€æ…‹ |
| Phase 2 | _____ | _____ | _____ | å¤§å‹çµ„ä»¶æ‡¶åŠ è¼‰ |
| Phase 3 | _____ | _____ | _____ | Dialog æ‡¶åŠ è¼‰ |
| Phase 4 | _____ | _____ | _____ | ç·¨è¼¯å™¨æ‡¶åŠ è¼‰ |
| Phase 5 | _____ | _____ | _____ | ç¬¬ä¸‰æ–¹åº«å„ªåŒ– |
| Final | _____ | _____ | _____ | æœ€çµ‚çµæœ |

### Lighthouse åˆ†æ•¸è¿½è¹¤
| é é¢ | éšæ®µ | Performance | FCP (s) | LCP (s) | TTI (s) |
|------|------|-------------|---------|---------|---------|
| é¦–é  | Before | _____ | _____ | _____ | _____ |
| é¦–é  | After | _____ | _____ | _____ | _____ |
| Dashboard | Before | _____ | _____ | _____ | _____ |
| Dashboard | After | _____ | _____ | _____ | _____ |
| Writing | Before | _____ | _____ | _____ | _____ |
| Writing | After | _____ | _____ | _____ | _____ |

---

## ğŸ¯ æˆåŠŸæ¨™æº–

### å¿…é ˆé”æˆï¼ˆMust Haveï¼‰
- [x] âœ… æ‰€æœ‰æ§‹å»ºéŒ¯èª¤å·²ä¿®å¾©
- [ ] âœ… Bundle size æ¸›å°‘ â‰¥ 20%
- [ ] âœ… Lighthouse Performance â‰¥ 85

### æ‡‰è©²é”æˆï¼ˆShould Haveï¼‰
- [ ] âœ… Bundle size æ¸›å°‘ â‰¥ 25%
- [ ] âœ… Lighthouse Performance â‰¥ 90
- [ ] âœ… FCP < 2.0s

### å¯ä»¥é”æˆï¼ˆNice to Haveï¼‰
- [ ] âœ… Bundle size æ¸›å°‘ â‰¥ 30%
- [ ] âœ… Lighthouse Performance â‰¥ 95
- [ ] âœ… FCP < 1.5s

---

## ğŸ’¡ æç¤ºèˆ‡æŠ€å·§

### æ¯æ—¥æª¢æŸ¥æ¸…å–®
- [ ] æ—©ä¸Šï¼šæª¢æŸ¥å¾…è¾¦äº‹é …ï¼Œè¦åŠƒä»Šæ—¥ä»»å‹™
- [ ] å¯¦æ–½å‰ï¼šé‹è¡Œæ¸¬è©¦ç¢ºä¿åŠŸèƒ½æ­£å¸¸
- [ ] å¯¦æ–½å¾Œï¼šé‹è¡Œæ¸¬è©¦é©—è­‰åŠŸèƒ½ä¸å—å½±éŸ¿
- [ ] æ™šä¸Šï¼šæ›´æ–°é€²åº¦ï¼Œè¨˜éŒ„é‡åˆ°çš„å•é¡Œ

### æ¸¬è©¦å‘½ä»¤å¿«æ·æ–¹å¼
```bash
# æ§‹å»º
npm run build

# Bundle åˆ†æ
npm run analyze

# é–‹ç™¼æ¨¡å¼
npm run dev

# é¡å‹æª¢æŸ¥
npx tsc --noEmit

# Linting
npm run lint
```

### å¿«é€Ÿå›æ»¾
```bash
# å¦‚æœå„ªåŒ–å‡ºå•é¡Œï¼Œå¿«é€Ÿå›æ»¾åˆ°ä¸Šä¸€å€‹ commit
git stash
git reset --hard HEAD~1

# æ¢å¾© stashï¼ˆå¦‚æœéœ€è¦ï¼‰
git stash pop
```

---

## ğŸ“ ç­†è¨˜å€åŸŸ

### ä»Šæ—¥ç­†è¨˜ (___/___/_____)
```
è¨˜éŒ„ä»Šå¤©å®Œæˆçš„ä»»å‹™ã€é‡åˆ°çš„å•é¡Œã€è§£æ±ºæ–¹æ¡ˆç­‰...
```

### å•é¡Œè¨˜éŒ„
```
è¨˜éŒ„ä»»ä½•éœ€è¦å¾ŒçºŒè·Ÿé€²çš„å•é¡Œ...
```

### æ”¹é€²æƒ³æ³•
```
è¨˜éŒ„ä»»ä½•å„ªåŒ–æƒ³æ³•æˆ–æœªä¾†å¯ä»¥å˜—è©¦çš„æ–¹å‘...
```

---

**æœ€å¾Œæ›´æ–°**: 2026-01-26
**ä¸‹æ¬¡æª¢æŸ¥**: _____
